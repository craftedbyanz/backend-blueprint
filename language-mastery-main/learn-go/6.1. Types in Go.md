# Intro

- Go lÃ  ngÃ´n ngá»¯ `kiá»ƒu tÄ©nh (statically typed)` â†’ Kiá»ƒu dá»¯ liá»‡u Ä‘Æ°á»£c kiá»ƒm tra lÃºc `biÃªn dá»‹ch`, khÃ´ng pháº£i lÃºc cháº¡y.
- Go cho phÃ©p báº¡n Ä‘á»‹nh nghÄ©a `method` gáº¯n vÃ o `kiá»ƒu dá»¯ liá»‡u`, tÆ°Æ¡ng tá»± nhÆ° method trong class cá»§a cÃ¡c ngÃ´n ngá»¯ OOP.
- Äiá»ƒm Ä‘áº·c biá»‡t: Trong Go, `báº¥t ká»³ kiá»ƒu nÃ o` cÅ©ng cÃ³ thá»ƒ cÃ³ method, khÃ´ng cáº§n pháº£i lÃ  "struct" hay "class".
- `interface:` Cho phÃ©p `viáº¿t code dá»±a trÃªn hÃ nh vi (behavior)`, chá»© khÃ´ng pháº£i dá»±a trÃªn kiá»ƒu cá»¥ thá»ƒ
- Go `khÃ´ng cÃ³ káº¿ thá»«a` (inheritance) nhÆ° Java/C++. Má»i thá»© xoay quanh `composition vÃ  interface.` TÆ° tÆ°á»Ÿng chÃ­nh: Composition over inheritance â€“ thÃ nh pháº§n hÃ³a thay vÃ¬ káº¿ thá»«a.

## Types in Go

- Go há»— trá»£ Ä‘á»‹nh nghÄ©a type dá»±a trÃªn báº¥t ká»³ kiá»ƒu nÃ o

```
type Score int
type Converter func(string) Score
type TeamScores map[string]Score
```

- Score lÃ  má»™t alias cá»§a int â€“ báº¡n cÃ³ thá»ƒ dÃ¹ng nÃ³ Ä‘á»ƒ gáº¯n method hoáº·c tÄƒng tÃ­nh biá»ƒu Ä‘áº¡t.
- Converter lÃ  má»™t kiá»ƒu function nháº­n vÃ o string vÃ  tráº£ vá» Score.
- TeamScores lÃ  má»™t kiá»ƒu map tá»« tÃªn sang Ä‘iá»ƒm sá»‘.

## Giáº£i thÃ­ch vá» â€œAbstractâ€ vÃ  â€œConcreteâ€ Type

**Abstract type trong Go lÃ  interface**

- Interface Ä‘á»‹nh nghÄ©a `hÃ nh vi mong muá»‘n` qua method signatures â€“ `khÃ´ng cÃ³ implementation cá»¥ thá»ƒ`.

```
type Reader interface {
    Read(p []byte) (n int, err error)
}
```

**Concrete type**
Concrete type lÃ  kiá»ƒu cÃ³:

- Dá»¯ liá»‡u cá»¥ thá»ƒ (fields, kiá»ƒu ná»n)
- `Triá»ƒn khai` thá»±c táº¿ cÃ¡c method (náº¿u cÃ³)

```
type File struct {
    name string
    data []byte
}

func (f *File) Read(p []byte) (int, error) {
    // Implement Read
}
```

> File lÃ  concrete type vÃ¬ nÃ³ lÆ°u dá»¯ liá»‡u vÃ  triá»ƒn khai hÃ nh vi (Read).

## ðŸ”‘ Types are executable documentation â€” â€œKiá»ƒu dá»¯ liá»‡u chÃ­nh lÃ  tÃ i liá»‡u cháº¡y Ä‘Æ°á»£c.â€

Trong Go, báº¡n nÃªn Ä‘áº·t tÃªn kiá»ƒu (type) ngay cáº£ khi nÃ³ chá»‰ dá»±a trÃªn má»™t kiá»ƒu built-in nhÆ° int, string, float64... hoáº·c má»™t user-defined type khÃ¡c.

- GiÃºp ngÆ°á»i Ä‘á»c hiá»ƒu rÃµ hÆ¡n vá» má»¥c Ä‘Ã­ch, pháº¡m vi sá»­ dá»¥ng cá»§a dá»¯ liá»‡u.
- Giáº£m lá»—i khi sá»­ dá»¥ng sai kiá»ƒu dá»¯ liá»‡u (semantic validation).
- Thá»ƒ hiá»‡n rÃµ rÃ ng Ã½ Ä‘á»‹nh cá»§a ngÆ°á»i láº­p trÃ¬nh.

**VÃ­ dá»¥ cá»¥ thá»ƒ**
KÃ©m rÃµ rÃ ng

```
func SetDiscount(percent int) { ... }
```

> NgÆ°á»i Ä‘á»c khÃ´ng biáº¿t percent lÃ  sá»‘ gÃ¬ â€” cÃ³ thá»ƒ lÃ  pháº§n trÄƒm, Ä‘á»™ tuá»•i, hay sá»‘ lÆ°á»£t?
> RÃµ rÃ ng vá»›i user-defined type

```
type Percentage int

func SetDiscount(p Percentage) { ... }
```

> BÃ¢y giá» ai Ä‘á»c cÅ©ng hiá»ƒu p lÃ  pháº§n trÄƒm giáº£m giÃ¡, khÃ´ng láº«n lá»™n.

**âœ… Khi nÃ o nÃªn tÃ¡ch thÃ nh hai type?**
Khi báº¡n cÃ³ cÃ¹ng underlying type, nhÆ°ng khÃ¡c nhau vá» hÃ nh vi (behavior) hoáº·c Ã½ nghÄ©a (semantics), thÃ¬ hÃ£y táº¡o hai type.

```
type Age int
type Temperature int
```

- Cáº£ hai cÃ¹ng lÃ  int
- NhÆ°ng ta khÃ´ng muá»‘n ai Ä‘Ã³ truyá»n Temperature vÃ o nÆ¡i cáº§n Age

## Go khÃ´ng cÃ³ kiá»ƒu enum nhÆ° Java/C#, nhÆ°ng báº¡n cÃ³ thá»ƒ dÃ¹ng iota Ä‘á»ƒ táº¡o má»™t táº­p há»£p cÃ¡c háº±ng sá»‘ tÄƒng dáº§n theo giÃ¡ trá»‹ sá»‘ nguyÃªn.

```
type MailCategory int

const (
    Uncategorized MailCategory = iota // 0
    Personal                           // 1
    Spam                               // 2
    Social                             // 3
    Advertisements                     // 4
)
```

**âœ… Khi nÃ o nÃªn dÃ¹ng iota?**

- Khi chá»‰ cáº§n phÃ¢n biá»‡t cÃ¡c háº±ng sá»‘ vá»›i nhau, khÃ´ng quan tÃ¢m Ä‘áº¿n giÃ¡ trá»‹ cá»¥ thá»ƒ Ä‘áº±ng sau.
- Dá»… thÃªm/xoÃ¡/sáº¯p xáº¿p láº¡i háº±ng sá»‘ mÃ  khÃ´ng pháº£i cáº­p nháº­t giÃ¡ trá»‹ thá»§ cÃ´ng.
- Code ngáº¯n gá»n, dá»… Ä‘á»c.

**âš ï¸ Khi nÃ o KHÃ”NG nÃªn dÃ¹ng iota?**

- âŒ Khi giÃ¡ trá»‹ sá»‘ cá»§a háº±ng sá»‘ Ä‘Æ°á»£c quy Ä‘á»‹nh rÃµ rÃ ng á»Ÿ nÆ¡i khÃ¡c (spec/API/database).
- VÃ¬ náº¿u báº¡n chÃ¨n thÃªm má»™t dÃ²ng vÃ o giá»¯a, táº¥t cáº£ cÃ¡c háº±ng sá»‘ sau Ä‘Ã³ sáº½ bá»‹ Ä‘á»•i giÃ¡ trá»‹ â†’ lá»—i khÃ³ phÃ¡t hiá»‡n.
  vÃ­ dá»¥ sai

```
const (
    HTTP_OK       = iota + 200 // 200
    HTTP_CREATED               // 201
    HTTP_ACCEPTED              // 202
)
```

- Náº¿u chÃ¨n thÃªm HTTP_SWITCHING_PROTOCOLS á»Ÿ Ä‘áº§u, táº¥t cáº£ sá»‘ sáº½ lá»‡ch Ä‘i 1!
  > ðŸ§  Tá»‘t nháº¥t: giÃ¡ trá»‹ nÃ o quan trá»ng, hÃ£y ghi rÃµ.

**ðŸŽ¯ Máº¹o khá»Ÿi táº¡o máº·c Ä‘á»‹nh**

> VÃ¬ iota báº¯t Ä‘áº§u tá»« 0, giÃ¡ trá»‹ Ä‘áº§u tiÃªn nÃªn lÃ  má»™t "default" hoáº·c "invalid" value náº¿u cáº§n.

**Pattern phá»• biáº¿n:**

```
type State int

const (
    _ State = iota // 0 - skip
    StateReady     // 1
    StateRunning   // 2
    StateDone      // 3
)
```

```
const (
    InvalidState State = iota
    Ready
    Running
    Done
)
```
